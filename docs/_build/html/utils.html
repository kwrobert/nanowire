
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>utils package &#8212; Nanowire .1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="sim_wrapper module" href="sim_wrapper.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="utils-package">
<h1>utils package<a class="headerlink" href="#utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-utils.config">
<span id="utils-config-module"></span><h2>utils.config module<a class="headerlink" href="#module-utils.config" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="utils.config.get_env_variable">
<code class="descclassname">utils.config.</code><code class="descname">get_env_variable</code><span class="sig-paren">(</span><em>match</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#get_env_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.get_env_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Given re module match object, return environment variable matching the
string that was matched</p>
</dd></dl>

<dl class="class">
<dt id="utils.config.Config">
<em class="property">class </em><code class="descclassname">utils.config.</code><code class="descname">Config</code><span class="sig-paren">(</span><em>path=None</em>, <em>data=None</em>, <em>raw_text=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">_abcoll.MutableMapping</span></code></p>
<p>An object to represent the simulation config that behaves like a dict.
It can be initialized with a path, or an actual python data structure as
with the usual dict but has some extra convenience methods</p>
<dl class="method">
<dt id="utils.config.Config.expand_vars">
<code class="descname">expand_vars</code><span class="sig-paren">(</span><em>in_table=None</em>, <em>old_key=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.expand_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.expand_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand environment variables in the config and update it in place
without changing anything else</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.build_dependencies">
<code class="descname">build_dependencies</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.build_dependencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.build_dependencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Build out the dependency graph that determines which other config item a
particular config item refers to, and which config items refer to it.
We can then use this graph to determine which substitutions we need to
perform first when calling interpolate</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.interpolate">
<code class="descname">interpolate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.interpolate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.interpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Scans the config for any reference strings and resolves them to
their actual values by retrieving them from elsewhere in the config</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.evaluate">
<code class="descname">evaluate</code><span class="sig-paren">(</span><em>in_table=None</em>, <em>old_key=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.evaluate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates any expressions surrounded in back ticks</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.getfromseq">
<code class="descname">getfromseq</code><span class="sig-paren">(</span><em>keyset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.getfromseq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.getfromseq" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience method to get the section of the config file located
at the end of the sequence of keys</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.setfromseq">
<code class="descname">setfromseq</code><span class="sig-paren">(</span><em>keyset</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.setfromseq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.setfromseq" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience method to set the a value in the config given a sequence of keys</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.delfromseq">
<code class="descname">delfromseq</code><span class="sig-paren">(</span><em>keyset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.delfromseq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.delfromseq" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the section of the config located at the end of a sequence
of keys</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of the current config object</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Dumps this config object to its YAML representation given a path to a file</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.dump">
<code class="descname">dump</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.dump"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns YAML representation of this particular config</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.get_height">
<code class="descname">get_height</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.get_height"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.get_height" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total height of the device</p>
</dd></dl>

<dl class="method">
<dt id="utils.config.Config.sorted_dict">
<code class="descname">sorted_dict</code><span class="sig-paren">(</span><em>adict</em>, <em>reverse=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/config.html#Config.sorted_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.config.Config.sorted_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sorted version of a dictionary sorted by the ‘order’ key.
Used to sort layers, geometric shapes into their proper physical order.
Can pass in a kwarg to reverse the order if desired</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-utils.rcwa_app">
<span id="utils-rcwa-app-module"></span><h2>utils.rcwa_app module<a class="headerlink" href="#module-utils.rcwa_app" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="utils.rcwa_app.RCWA_App">
<em class="property">class </em><code class="descclassname">utils.rcwa_app.</code><code class="descname">RCWA_App</code><span class="sig-paren">(</span><em>conf</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rcwa_app.html#RCWA_App"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.rcwa_app.RCWA_App" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">gc3libs.Application</span></code></p>
<p>Runs the lua script that interfaces with the S4 RCWA library</p>
</dd></dl>

<dl class="class">
<dt id="utils.rcwa_app.SimWrapper">
<em class="property">class </em><code class="descclassname">utils.rcwa_app.</code><code class="descname">SimWrapper</code><a class="reference internal" href="_modules/utils/rcwa_app.html#SimWrapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.rcwa_app.SimWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">gc3libs.cmdline.SessionBasedScript</span></code></p>
<p>The class that wraps around all the individual simulations. It handles all the
directory set up and parameter resolution</p>
<dl class="method">
<dt id="utils.rcwa_app.SimWrapper.new_tasks">
<code class="descname">new_tasks</code><span class="sig-paren">(</span><em>extra</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/rcwa_app.html#SimWrapper.new_tasks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.rcwa_app.SimWrapper.new_tasks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-utils.simulation">
<span id="utils-simulation-module"></span><h2>utils.simulation module<a class="headerlink" href="#module-utils.simulation" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="utils.simulation.DataManager">
<em class="property">class </em><code class="descclassname">utils.simulation.</code><code class="descname">DataManager</code><span class="sig-paren">(</span><em>conf</em>, <em>log</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#DataManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.DataManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">_abcoll.MutableMapping</span></code></p>
<p>The base class for all <a href="#id1"><span class="problematic" id="id2">*</span></a>DataManager objects. This purpose of this object is
to manage retrieving data from some on-disk format and storing it in a
dictionary for later retrieval (the _data dict). This object behaves like a
dict, and overrides all the key dictionary special methods.</p>
<p>Lazy-loading logic is implemented. When initialized, this object should
populate the keys of _data with all data items available on disk without
loading them, instead storing None as the value. An item is only actually
retrieved from the on-disk format when it is requested.</p>
<p>Lazy writing is implemented as well. The value corresponding to a given key
is updated if and only if the attempted assignment value differs from the
existing value. If so, the _updated dict stores True to indicate that data
value has been updated. Upon writing, only update values are written to
disk. DISCLAIMER: This doesn’t actually work for the NPZ backend because
IDK how to modify individual arrays within the archive.</p>
<p>We don’t use the object dict (i.e __dict__) to store the simulation
data because I dont want to worry about having keys for certain pieces of
data conflict with some attributes I might want to set on this object. It’s
slightly less memory efficient but not in a significant way.</p>
</dd></dl>

<dl class="class">
<dt id="utils.simulation.HDF5DataManager">
<em class="property">class </em><code class="descclassname">utils.simulation.</code><code class="descname">HDF5DataManager</code><span class="sig-paren">(</span><em>conf</em>, <em>log</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#HDF5DataManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.HDF5DataManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#utils.simulation.DataManager" title="utils.simulation.DataManager"><code class="xref py py-class docutils literal"><span class="pre">utils.simulation.DataManager</span></code></a></p>
<p>Data manager class for the HDF5 storage backend</p>
<dl class="method">
<dt id="utils.simulation.HDF5DataManager.write_data">
<code class="descname">write_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#HDF5DataManager.write_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.HDF5DataManager.write_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes all necessary data out to the HDF5 file</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="utils.simulation.NPZDataManager">
<em class="property">class </em><code class="descclassname">utils.simulation.</code><code class="descname">NPZDataManager</code><span class="sig-paren">(</span><em>conf</em>, <em>log</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#NPZDataManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.NPZDataManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#utils.simulation.DataManager" title="utils.simulation.DataManager"><code class="xref py py-class docutils literal"><span class="pre">utils.simulation.DataManager</span></code></a></p>
<dl class="method">
<dt id="utils.simulation.NPZDataManager.write_data">
<code class="descname">write_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#NPZDataManager.write_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.NPZDataManager.write_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes all the data in the _data dict to disk. Unfortunately numpy npz
archives don’t support setting individual items in the NPZArchive
object (i.e _dfile) and only writing the changes, so if any data key
has been updated we need to write the entire dict for now</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="utils.simulation.Simulation">
<em class="property">class </em><code class="descclassname">utils.simulation.</code><code class="descname">Simulation</code><span class="sig-paren">(</span><em>conf</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation" title="Permalink to this definition">¶</a></dt>
<dd><p>An object that represents a simulation. It stores a DataManager object for
managing the reading and writing of all data as an attribute. It also
stores a Config object, which is a dict-like object representing the
configuration for the simulation, as an attribute. Many of the methods are
for performing calculations on the data.</p>
<dl class="method">
<dt id="utils.simulation.Simulation.write_data">
<code class="descname">write_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.write_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.write_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the data. This is a simple wrapper around the write_data()
method of the DataManager object, with some code to compute the time it
took to perform the write operation</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.get_scalar_quantity">
<code class="descname">get_scalar_quantity</code><span class="sig-paren">(</span><em>quantity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.get_scalar_quantity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.get_scalar_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the entire 3D matrix for some scalar quantity</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>quantity</strong> (<em>str</em>) – The quantity you would like to retrive (ex: ‘Ex’
or ‘normE’)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A 3D numpy array of the specified quantity</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>KeyError</strong> – If the specified quantity does not exist in the data
dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.clear_data">
<code class="descname">clear_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.clear_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.clear_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears all the data attributes to free up memory</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.extend_data">
<code class="descname">extend_data</code><span class="sig-paren">(</span><em>quantity</em>, <em>new_data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.extend_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.extend_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new key, value pair to the DataManager object</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.get_line">
<code class="descname">get_line</code><span class="sig-paren">(</span><em>quantity</em>, <em>line_dir</em>, <em>c1</em>, <em>c2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.get_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.get_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets data along a line through the 3D data array for the given quantity
along a given direction</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>line_dir</strong> (<em>str</em>) – Any of ‘x’, ‘y’, or ‘z’. Determines the direction</td>
</tr>
</tbody>
</table>
<p>along which the line cut is taken, the other two coordinates remain
fixed and are specified by c1 and c2.
:param int c1: The integer index for the first fixed coordinate.
Indexes are in x,y, z order so if line_dir=’z’ then c1 corresponds to x
:param int c2: The integer index for the second coordinate.
:param str quantity: The quantity whose data array you wish to take a
line cut through</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.get_plane">
<code class="descname">get_plane</code><span class="sig-paren">(</span><em>quantity</em>, <em>plane</em>, <em>pval</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.get_plane"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.get_plane" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets data along a 2D plane/slice through the 3D data array for a given
quantity</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>plane</strong> (<em>str</em>) – Any of ‘xy’, ‘yz’, or ‘xz’. Determines the plane</td>
</tr>
</tbody>
</table>
<p>along which the slice is taken
:param int pval: The index along the final unspecified direction. If
plane=’xy’ then index would index along the z direction.
:param str quantity: The quantity whose data array you wish to take a
line cut through</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.normE">
<code class="descname">normE</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.normE"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.normE" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the norm of E. Adds it to the data dict for the simulation
and also returns a 3D array
:return: A 3D numpy array containing normE</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.normEsquared">
<code class="descname">normEsquared</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.normEsquared"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.normEsquared" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates and returns normE squared. Adds it to the data dict for
the simulation and also returns a 3D array
:return: A 3D numpy array containing normE squared</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.normH">
<code class="descname">normH</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.normH"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.normH" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate and returns the norm of H</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.normHsquared">
<code class="descname">normHsquared</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.normHsquared"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.normHsquared" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates and returns the norm of H squared</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.get_nk">
<code class="descname">get_nk</code><span class="sig-paren">(</span><em>path</em>, <em>freq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.get_nk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.get_nk" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns n and k, the real and imaginary components of the index of refraction at a given
frequency
:param str path: A path to a text file containing the n and k data. The
first column should be the frequency in Hertz, the second column the n
values, and the third column the k values. Columns must be delimited
by whitespace.
:param float freq: The desired frequency in Hertz</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.genRate">
<code class="descname">genRate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.genRate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.genRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes and returns the 3D matrix containing the generation rate.
Returns in units of cm^-3</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.angularAvg">
<code class="descname">angularAvg</code><span class="sig-paren">(</span><em>quantity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.angularAvg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.angularAvg" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an angular average of some quantity for either the E or H field</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.transmissionData">
<code class="descname">transmissionData</code><span class="sig-paren">(</span><em>port=’Substrate’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.transmissionData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.transmissionData" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes reflection, transmission, and absorbance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>port</strong> (<em>str</em>) – Name of the location at which you would like to place the
transmission port (i.e where you would like to compute
transmission). This must correspond to one of the keys placed in
the fluxes dict located at self.data[‘fluxes’]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.integrated_absorbtion">
<code class="descname">integrated_absorbtion</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.integrated_absorbtion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.integrated_absorbtion" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the absorption of a layer by using the volume integral of
the product of the imaginary part of the relative permittivity and the
norm squared of the E field</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.draw_geometry_2d">
<code class="descname">draw_geometry_2d</code><span class="sig-paren">(</span><em>plane</em>, <em>pval</em>, <em>ax_hand</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.draw_geometry_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.draw_geometry_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>This function draws the layer boundaries and in-plane geometry on 2D
heatmaps</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.heatmap2d">
<code class="descname">heatmap2d</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>cs</em>, <em>labels</em>, <em>ptype</em>, <em>pval</em>, <em>save_path=None</em>, <em>show=False</em>, <em>draw=False</em>, <em>fixed=None</em>, <em>colorsMap=’jet’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.heatmap2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.heatmap2d" title="Permalink to this definition">¶</a></dt>
<dd><p>A general utility method for plotting a 2D heat map</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.plane_2d">
<code class="descname">plane_2d</code><span class="sig-paren">(</span><em>quantity</em>, <em>plane</em>, <em>pval</em>, <em>draw=False</em>, <em>fixed=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.plane_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.plane_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots a heatmap of a fixed 2D plane</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.scatter3d">
<code class="descname">scatter3d</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>z</em>, <em>cs</em>, <em>labels</em>, <em>ptype</em>, <em>colorsMap=’jet’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.scatter3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.scatter3d" title="Permalink to this definition">¶</a></dt>
<dd><p>A general utility method for scatter plots in 3D</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.full_3d">
<code class="descname">full_3d</code><span class="sig-paren">(</span><em>quantity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.full_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.full_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a full 3D plot of a specified scalar quantity</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.planes_3d">
<code class="descname">planes_3d</code><span class="sig-paren">(</span><em>quantity</em>, <em>xplane</em>, <em>yplane</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.planes_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.planes_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots some scalar quantity in 3D but only along specified x-z and y-z planes</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.line_plot">
<code class="descname">line_plot</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>ptype</em>, <em>labels</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.line_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.line_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a simple line plot</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.Simulation.fixed_line">
<code class="descname">fixed_line</code><span class="sig-paren">(</span><em>quantity</em>, <em>direction</em>, <em>coord1</em>, <em>coord2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#Simulation.fixed_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.Simulation.fixed_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a scalar quantity on a line along a the z direction at some pair of
coordinates in the plane perpendicular to that direction</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="utils.simulation.SimulationGroup">
<em class="property">class </em><code class="descclassname">utils.simulation.</code><code class="descname">SimulationGroup</code><span class="sig-paren">(</span><em>sims</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>A group of simulations. Takes a list of Simulation objects as an argument.
This class is not responsible for grouping Simulation objects by some
criteria, it just expects a list of already grouped Simulation objects.</p>
<p>Provides methods for calculating things on a group of simulations. The
results of these methods might not be sensible for some groupings. For
example, calculating the convergence of a group that is group against
frequency doesn’t make any sense. Similiarly, calculating Jsc of a group
that is grouped against number of basis terms also doesn’t make sense.</p>
<dl class="method">
<dt id="utils.simulation.SimulationGroup.get_plane">
<code class="descname">get_plane</code><span class="sig-paren">(</span><em>scalar</em>, <em>plane</em>, <em>pval</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.get_plane"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.get_plane" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets data along a 2D plane/slice through the 3D data array for a given
quantity</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>plane</strong> (<em>str</em>) – Any of ‘xy’, ‘yz’, or ‘xz’. Determines the plane</td>
</tr>
</tbody>
</table>
<p>along which the slice is taken
:param int pval: The index along the final unspecified direction. If
plane=’xy’ then index would index along the z direction.
:param str quantity: The quantity whose data array you wish to take a
line cut through</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.diff_sq">
<code class="descname">diff_sq</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.diff_sq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.diff_sq" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the magnitude of the difference vector squared between two vector fields at each
point in space</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.get_slice">
<code class="descname">get_slice</code><span class="sig-paren">(</span><em>sim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.get_slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.get_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns indices for data that strip out air and substrate regions</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.get_comp_vec">
<code class="descname">get_comp_vec</code><span class="sig-paren">(</span><em>sim</em>, <em>field</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.get_comp_vec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.get_comp_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the comparison vector</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.local_error">
<code class="descname">local_error</code><span class="sig-paren">(</span><em>field</em>, <em>exclude=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.local_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.local_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the average of the local error between the vector fields of two simulations at
each point in space</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.global_error">
<code class="descname">global_error</code><span class="sig-paren">(</span><em>field</em>, <em>exclude=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.global_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.global_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the global error between the vector fields of two simulations. This is the sum
of the magnitude squared of the difference vectors divided by the sum of the magnitude
squared of the comparison efield vector over the desired section of the simulation cell</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.adjacent_error">
<code class="descname">adjacent_error</code><span class="sig-paren">(</span><em>field</em>, <em>exclude=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.adjacent_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.adjacent_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the global error between the vector fields of two simulations. This is the sum
of the magnitude squared of the difference vectors divided by the sum of the magnitude
squared of the comparison efield vector over the desired section of the simulation cell.
This computes error between adjacent sims in a sweep through basis terms.</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.scalar_reduce">
<code class="descname">scalar_reduce</code><span class="sig-paren">(</span><em>quantity</em>, <em>avg=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.scalar_reduce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.scalar_reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine a scalar quantity across all simulations in each group. If
avg=False then a direct sum is computed, otherwise an average is
computed</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.fractional_absorbtion">
<code class="descname">fractional_absorbtion</code><span class="sig-paren">(</span><em>port=’Substrate’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.fractional_absorbtion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.fractional_absorbtion" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the fraction of the incident spectrum that is absorbed by
the device. This is a unitless number, and its interpretation somewhat
depends on the units you express the incident spectrum in. If you
expressed your incident spectrum in photon number, this can be
interpreted as the fraction of incident photons that were absorbed. If
you expressed your incident spectrum in terms of power per unit area,
then this can be interpreted as the fraction of incident power per unit
area that gets absorbed. In summary, its the fraction of whatever you
put in that is being absorbed by the device.</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.Jsc">
<code class="descname">Jsc</code><span class="sig-paren">(</span><em>port=’Substrate’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.Jsc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.Jsc" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes photocurrent density. This is just the integrated
absorption scaled by a unitful factor. Assuming perfect carrier
collection, meaning every incident photon gets converted to 1 collected
electron, this factor is q/(hbar*c) which converts to a current per
unit area</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.Jsc_integrated">
<code class="descname">Jsc_integrated</code><span class="sig-paren">(</span><em>port=’Substrate’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.Jsc_integrated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.Jsc_integrated" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute te photocurrent density by performing a volume integral of the
generation rate</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.weighted_transmissionData">
<code class="descname">weighted_transmissionData</code><span class="sig-paren">(</span><em>port=’Substrate’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.weighted_transmissionData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.weighted_transmissionData" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes spectrally weighted absorption,transmission, and reflection</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.convergence">
<code class="descname">convergence</code><span class="sig-paren">(</span><em>quantity</em>, <em>err_type=’global’</em>, <em>scale=’linear’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.convergence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.convergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the convergence of a field across all available simulations</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.plot_scalar_reduce">
<code class="descname">plot_scalar_reduce</code><span class="sig-paren">(</span><em>quantity</em>, <em>plane</em>, <em>pval</em>, <em>draw=False</em>, <em>fixed=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.plot_scalar_reduce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.plot_scalar_reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the result of a particular scalar reduction for each group</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulation.SimulationGroup.transmission_data">
<code class="descname">transmission_data</code><span class="sig-paren">(</span><em>absorbance</em>, <em>reflectance</em>, <em>transmission</em>, <em>port=’Substrate’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulation.html#SimulationGroup.transmission_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulation.SimulationGroup.transmission_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot transmissions, absorption, and reflectance assuming leaves are frequency</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-utils.simulator">
<span id="utils-simulator-module"></span><h2>utils.simulator module<a class="headerlink" href="#module-utils.simulator" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="utils.simulator.Simulator">
<em class="property">class </em><code class="descclassname">utils.simulator.</code><code class="descname">Simulator</code><span class="sig-paren">(</span><em>conf</em>, <em>q=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="utils.simulator.Simulator.open_hdf5">
<code class="descname">open_hdf5</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.open_hdf5"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.open_hdf5" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.clean_sim">
<code class="descname">clean_sim</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.clean_sim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.clean_sim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.update_id">
<code class="descname">update_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.update_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.update_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Update sim id. Used after changes are made to the config</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.make_logger">
<code class="descname">make_logger</code><span class="sig-paren">(</span><em>log_level=’info’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.make_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.make_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes the logger for this simulation</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.configure">
<code class="descname">configure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.configure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure options for the RCWA solver</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.set_excitation">
<code class="descname">set_excitation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.set_excitation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.set_excitation" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the exciting plane wave for the simulation</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.build_device">
<code class="descname">build_device</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.build_device"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.build_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the device geometry</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.get_height">
<code class="descname">get_height</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.get_height"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.get_height" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the total height of the device</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.set_lattice">
<code class="descname">set_lattice</code><span class="sig-paren">(</span><em>period</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.set_lattice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.set_lattice" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the S4 simulation object with a new array period</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.set_basis">
<code class="descname">set_basis</code><span class="sig-paren">(</span><em>numbasis</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.set_basis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.set_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the S4 simulation object with a new set of basis terms</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.update_thicknesses">
<code class="descname">update_thicknesses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.update_thicknesses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.update_thicknesses" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates all layer thicknesses without rebuilding the device. This
allows reuse of any layer eigenmodes already computed and utilizes a
fundamental efficiency of the RCWA solver</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.get_field">
<code class="descname">get_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.get_field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.get_field" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.get_fluxes">
<code class="descname">get_fluxes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.get_fluxes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.get_fluxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the fluxes at the top and bottom of each layer. This is a surface
integral of the component of the Poynting flux perpendicular to this
x-y plane of the interface, and have forward and backward componenets.
Returns a dict where the keys are the layer name and the values are a
length 2 tuple with the forward component first and the backward
component second. The components are complex numbers</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.save_data">
<code class="descname">save_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.save_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.save_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the self.data dictionary to an npz file. This dictionary
contains all the fields and the fluxes dictionary</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.save_conf">
<code class="descname">save_conf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.save_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.save_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the simulation config object to a file</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.save_time">
<code class="descname">save_time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.save_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.save_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the run time for the simulation</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.calc_diff">
<code class="descname">calc_diff</code><span class="sig-paren">(</span><em>fields1</em>, <em>fields2</em>, <em>exclude=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.calc_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.calc_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the percent difference between two vector fields</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.adaptive_convergence">
<code class="descname">adaptive_convergence</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.adaptive_convergence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.adaptive_convergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs adaptive convergence by checking the error between vector
fields for simulations with two different numbers of basis terms.
Returns the field array, last number of basis terms simulated, and a
boolean representing whether or not the simulation is converged</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.mode_solve">
<code class="descname">mode_solve</code><span class="sig-paren">(</span><em>update=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.mode_solve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.mode_solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Find modes of the system. Supposedly you can get the resonant modes
of the system from the poles of the S matrix determinant, but I
currently can’t really make any sense of this output</p>
</dd></dl>

<dl class="method">
<dt id="utils.simulator.Simulator.save_all">
<code class="descname">save_all</code><span class="sig-paren">(</span><em>update=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#Simulator.save_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.Simulator.save_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all the data for this similation by calling the relevant class
methods. Basically just a convenient wrapper to execute all the
functions defined above</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="utils.simulator.main">
<code class="descclassname">utils.simulator.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/simulator.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.simulator.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-utils.utils">
<span id="utils-utils-module"></span><h2>utils.utils module<a class="headerlink" href="#module-utils.utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="utils.utils.get_combos">
<code class="descclassname">utils.utils.</code><code class="descname">get_combos</code><span class="sig-paren">(</span><em>conf</em>, <em>keysets</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/utils.html#get_combos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.get_combos" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a config object and an iterable of the parameters you wish to find
unique combinations of, return two lists. The first list contains the
names of all the variable parameters in the config object. The second is a
list of lists, where each inner list contains a unique combination of
values of the parameters provided in keysets. Order is preserved such that
the names in the first list corresponds to the values in the second list.
For example, the returned lists would look like:</p>
<p>list1 = [param_name1, param_name2, param_name3]
list2 = [[val11, val12, val13], [val21, val22, val23], [val31, val32, val33]]</p>
</dd></dl>

<dl class="function">
<dt id="utils.utils.tempfile">
<code class="descclassname">utils.utils.</code><code class="descname">tempfile</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/utils.html#tempfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.tempfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Context for temporary file.</p>
<p>Will find a free temporary filename upon entering
and will try to delete the file on leaving, even in case of an exception.</p>
<dl class="docutils">
<dt>suffix <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>optional file suffix</dd>
<dt>dir <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>optional directory to save temporary file in</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.utils.open_atomic">
<code class="descclassname">utils.utils.</code><code class="descname">open_atomic</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/utils.html#open_atomic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.open_atomic" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a temporary file path in the same directory as filepath. The temp
file is used as a placeholder for filepath to make atomic write operations
possible. The file will not be moved to destination in case of an exception.</p>
<dl class="docutils">
<dt>filepath <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>the actual filepath we wish to write to</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="utils.utils.StreamToLogger">
<em class="property">class </em><code class="descclassname">utils.utils.</code><code class="descname">StreamToLogger</code><span class="sig-paren">(</span><em>logger</em>, <em>log_level=20</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/utils.html#StreamToLogger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.StreamToLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Fake file-like stream object that redirects writes to a logger instance.</p>
<dl class="method">
<dt id="utils.utils.StreamToLogger.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>buf</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/utils.html#StreamToLogger.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.StreamToLogger.write" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="utils.utils.StreamToLogger.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/utils.html#StreamToLogger.flush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.StreamToLogger.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="utils.utils.configure_logger">
<code class="descclassname">utils.utils.</code><code class="descname">configure_logger</code><span class="sig-paren">(</span><em>level=’info’</em>, <em>name=None</em>, <em>console=False</em>, <em>logfile=None</em>, <em>propagate=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/utils.html#configure_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.configure_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a logger providing some arguments to make it more configurable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>str</em>) – Name of logger to be created. Defaults to the root logger</li>
<li><strong>level</strong> (<em>str</em>) – The log level of the logger, defaults to INFO. One of: [‘debug’, ‘info’,
‘warning’, ‘error’, ‘critical’]</li>
<li><strong>console</strong> (<em>bool</em>) – Add a stream handler to send messages to the console. Generally
only necessary for the root logger.</li>
<li><strong>logfile</strong> (<em>str</em>) – Path to a file. If specified, will create a simple file handler and send
messages to the specified file. The parent dirs to the location will
be created automatically if they don’t already exist.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.utils.make_hash">
<code class="descclassname">utils.utils.</code><code class="descname">make_hash</code><span class="sig-paren">(</span><em>o</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/utils.html#make_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.make_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>A recursive function for hasing any python built-in data type. Probably
won’t work on custom objects. It is consistent across runs and handles
arbitrary nesting. Mainly intended for computing the hash of config
dictionarys to establish a unique ID. Right now it ignores any settings in
the General section because those aren’t really important when it comes to
differentiating simulations</p>
</dd></dl>

<dl class="function">
<dt id="utils.utils.cmp_dicts">
<code class="descclassname">utils.utils.</code><code class="descname">cmp_dicts</code><span class="sig-paren">(</span><em>d1</em>, <em>d2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils/utils.html#cmp_dicts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils.utils.cmp_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively compares two dictionaries</p>
</dd></dl>

</div>
<div class="section" id="module-utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-utils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="Code.html">Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="Code.html#optics">optics</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="Code.html">Code</a><ul>
      <li>Previous: <a href="sim_wrapper.html" title="previous chapter">sim_wrapper module</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/utils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Kyle Robertson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/utils.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>